<p data-nodeid="1" class="">ä½¿ç”¨å…‹éš†å¯ä»¥ä¸ºæˆ‘ä»¬å¿«é€Ÿåœ°æ„å»ºå‡ºä¸€ä¸ªå·²æœ‰å¯¹è±¡çš„å‰¯æœ¬ï¼Œå®ƒå±äº Java åŸºç¡€çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­å¸¸è¢«é—®åˆ°çš„çŸ¥è¯†ç‚¹ä¹‹ä¸€ã€‚</p>
<p data-nodeid="2">æˆ‘ä»¬æœ¬è¯¾æ—¶çš„é¢è¯•é¢˜æ˜¯ï¼Œä»€ä¹ˆæ˜¯æµ…å…‹éš†å’Œæ·±å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å…‹éš†ï¼Ÿ</p>
<h3 data-nodeid="3">å…¸å‹å›ç­”</h3>
<p data-nodeid="4"><strong data-nodeid="114">æµ…å…‹éš†</strong>ï¼ˆShadow Cloneï¼‰æ˜¯æŠŠåŸå‹å¯¹è±¡ä¸­æˆå‘˜å˜é‡ä¸ºå€¼ç±»å‹çš„å±æ€§éƒ½å¤åˆ¶ç»™å…‹éš†å¯¹è±¡ï¼ŒæŠŠåŸå‹å¯¹è±¡ä¸­æˆå‘˜å˜é‡ä¸ºå¼•ç”¨ç±»å‹çš„å¼•ç”¨åœ°å€ä¹Ÿå¤åˆ¶ç»™å…‹éš†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åŸå‹å¯¹è±¡ä¸­å¦‚æœæœ‰æˆå‘˜å˜é‡ä¸ºå¼•ç”¨å¯¹è±¡ï¼Œåˆ™æ­¤å¼•ç”¨å¯¹è±¡çš„åœ°å€æ˜¯å…±äº«ç»™åŸå‹å¯¹è±¡å’Œå…‹éš†å¯¹è±¡çš„ã€‚</p>
<p data-nodeid="5">ç®€å•æ¥è¯´å°±æ˜¯æµ…å…‹éš†åªä¼šå¤åˆ¶åŸå‹å¯¹è±¡ï¼Œä½†ä¸ä¼šå¤åˆ¶å®ƒæ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="6"><img src="https://s0.lgstatic.com/i/image3/M01/07/2A/Ciqah16EEHqAS-yBAACmrlSP9OU378.png" alt="" data-nodeid="117"></p>
<p data-nodeid="7"><strong data-nodeid="122">æ·±å…‹éš†</strong>ï¼ˆDeep Cloneï¼‰æ˜¯å°†åŸå‹å¯¹è±¡ä¸­çš„æ‰€æœ‰ç±»å‹ï¼Œæ— è®ºæ˜¯å€¼ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ï¼Œéƒ½å¤åˆ¶ä¸€ä»½ç»™å…‹éš†å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æ·±å…‹éš†ä¼šæŠŠåŸå‹å¯¹è±¡å’ŒåŸå‹å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œéƒ½å¤åˆ¶ä¸€ä»½ç»™å…‹éš†å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="8"><img src="https://s0.lgstatic.com/i/image3/M01/07/2A/Ciqah16EEHqACOHEAAB2WjY2QEQ611.png" alt="" data-nodeid="124"></p>
<p data-nodeid="9">åœ¨ Java è¯­è¨€ä¸­è¦å®ç°å…‹éš†åˆ™éœ€è¦å®ç° Cloneable æ¥å£ï¼Œå¹¶é‡å†™ Object ç±»ä¸­çš„ clone() æ–¹æ³•ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="10"><code data-language="java"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">CloneExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºè¢«èµ‹å€¼å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.setId(<span class="hljs-number">1</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.setName(<span class="hljs-string">"Java"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å…‹éš†&nbsp;p1&nbsp;å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;(People)&nbsp;p1.clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;æ‰“å°åç§°</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="hljs-string">"p2:"</span>&nbsp;+&nbsp;p2.getName());
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Cloneable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å±æ€§</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;é‡å†™&nbsp;clone&nbsp;æ–¹æ³•
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws</span>&nbsp;CloneNotSupportedException
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta">@Override</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">protected</span>&nbsp;Object&nbsp;<span class="hljs-title">clone</span><span class="hljs-params">()</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">super</span>.clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;Integer&nbsp;<span class="hljs-title">getId</span><span class="hljs-params">()</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">setId</span><span class="hljs-params">(Integer&nbsp;id)</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.id&nbsp;=&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;String&nbsp;<span class="hljs-title">getName</span><span class="hljs-params">()</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">setName</span><span class="hljs-params">(String&nbsp;name)</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.name&nbsp;=&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="11">ä»¥ä¸Šç¨‹åºæ‰§è¡Œçš„ç»“æœä¸ºï¼š</p>
<pre class="lang-java" data-nodeid="12"><code data-language="java">p2:Java
</code></pre>
<h3 data-nodeid="13">è€ƒç‚¹åˆ†æ</h3>
<p data-nodeid="14">å…‹éš†ç›¸å…³çš„é¢è¯•é¢˜ä¸ç®—å¤ªéš¾ï¼Œä½†å› ä¸ºä½¿ç”¨é¢‘ç‡ä¸é«˜ï¼Œå› æ­¤å¾ˆå®¹æ˜“è¢«äººå¿½ç•¥ï¼Œé¢è¯•å®˜é€šå¸¸ä¼šåœ¨ä¸€é¢æˆ–è€…äºŒé¢çš„æ—¶å€™é—®åˆ°æ­¤çŸ¥è¯†ç‚¹ï¼Œå’Œå®ƒç›¸å…³çš„é¢è¯•é¢˜è¿˜æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p>
<ul data-nodeid="15">
<li data-nodeid="16">
<p data-nodeid="17">åœ¨ java.lang.Object ä¸­å¯¹ clone() æ–¹æ³•çš„çº¦å®šæœ‰å“ªäº›ï¼Ÿ</p>
</li>
<li data-nodeid="18">
<p data-nodeid="19">Arrays.copyOf() æ˜¯æ·±å…‹éš†è¿˜æ˜¯æµ…å…‹éš†ï¼Ÿ</p>
</li>
<li data-nodeid="20">
<p data-nodeid="21">æ·±å…‹éš†çš„å®ç°æ–¹å¼æœ‰å‡ ç§ï¼Ÿ</p>
</li>
<li data-nodeid="22">
<p data-nodeid="23">Java ä¸­çš„å…‹éš†ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆï¼Œæ—¢è¦å®ç°ç©ºæ¥å£ Cloneableï¼Œè¿˜è¦é‡å†™ Object çš„ clone() æ–¹æ³•ï¼Ÿ</p>
</li>
</ul>
<h3 data-nodeid="24">çŸ¥è¯†æ‰©å±•</h3>
<h4 data-nodeid="25">clone() æºç åˆ†æ</h4>
<p data-nodeid="26">è¦æƒ³çœŸæ­£çš„äº†è§£å…‹éš†ï¼Œé¦–å…ˆè¦ä»å®ƒçš„æºç å…¥æ‰‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-html" data-nodeid="27"><code data-language="html">/**
&nbsp;*&nbsp;Creates&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;this&nbsp;object.&nbsp;&nbsp;The&nbsp;precise&nbsp;meaning
&nbsp;*&nbsp;of&nbsp;"copy"&nbsp;may&nbsp;depend&nbsp;on&nbsp;the&nbsp;class&nbsp;of&nbsp;the&nbsp;object.&nbsp;The&nbsp;general
&nbsp;*&nbsp;intent&nbsp;is&nbsp;that,&nbsp;for&nbsp;any&nbsp;object&nbsp;{@code&nbsp;x},&nbsp;the&nbsp;expression:
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>
&nbsp;*&nbsp;x.clone()&nbsp;!=&nbsp;x<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;will&nbsp;be&nbsp;true,&nbsp;and&nbsp;that&nbsp;the&nbsp;expression:
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>
&nbsp;*&nbsp;x.clone().getClass()&nbsp;==&nbsp;x.getClass()<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;will&nbsp;be&nbsp;{@code&nbsp;true},&nbsp;but&nbsp;these&nbsp;are&nbsp;not&nbsp;absolute&nbsp;requirements.
&nbsp;*&nbsp;While&nbsp;it&nbsp;is&nbsp;typically&nbsp;the&nbsp;case&nbsp;that:
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>
&nbsp;*&nbsp;x.clone().equals(x)<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">blockquote</span>&gt;</span>
&nbsp;*&nbsp;will&nbsp;be&nbsp;{@code&nbsp;true},&nbsp;this&nbsp;is&nbsp;not&nbsp;an&nbsp;absolute&nbsp;requirement.
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
&nbsp;*&nbsp;By&nbsp;convention,&nbsp;the&nbsp;returned&nbsp;object&nbsp;should&nbsp;be&nbsp;obtained&nbsp;by&nbsp;calling
&nbsp;*&nbsp;{@code&nbsp;super.clone}.&nbsp;&nbsp;If&nbsp;a&nbsp;class&nbsp;and&nbsp;all&nbsp;of&nbsp;its&nbsp;superclasses&nbsp;(except
&nbsp;*&nbsp;{@code&nbsp;Object})&nbsp;obey&nbsp;this&nbsp;convention,&nbsp;it&nbsp;will&nbsp;be&nbsp;the&nbsp;case&nbsp;that
&nbsp;*&nbsp;{@code&nbsp;x.clone().getClass()&nbsp;==&nbsp;x.getClass()}.
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
&nbsp;*&nbsp;By&nbsp;convention,&nbsp;the&nbsp;object&nbsp;returned&nbsp;by&nbsp;this&nbsp;method&nbsp;should&nbsp;be&nbsp;independent
&nbsp;*&nbsp;of&nbsp;this&nbsp;object&nbsp;(which&nbsp;is&nbsp;being&nbsp;cloned).&nbsp;&nbsp;To&nbsp;achieve&nbsp;this&nbsp;independence,
&nbsp;*&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;of&nbsp;the&nbsp;object&nbsp;returned
&nbsp;*&nbsp;by&nbsp;{@code&nbsp;super.clone}&nbsp;before&nbsp;returning&nbsp;it.&nbsp;&nbsp;Typically,&nbsp;this&nbsp;means
&nbsp;*&nbsp;copying&nbsp;any&nbsp;mutable&nbsp;objects&nbsp;that&nbsp;comprise&nbsp;the&nbsp;internal&nbsp;"deep&nbsp;structure"
&nbsp;*&nbsp;of&nbsp;the&nbsp;object&nbsp;being&nbsp;cloned&nbsp;and&nbsp;replacing&nbsp;the&nbsp;references&nbsp;to&nbsp;these
&nbsp;*&nbsp;objects&nbsp;with&nbsp;references&nbsp;to&nbsp;the&nbsp;copies.&nbsp;&nbsp;If&nbsp;a&nbsp;class&nbsp;contains&nbsp;only
&nbsp;*&nbsp;primitive&nbsp;fields&nbsp;or&nbsp;references&nbsp;to&nbsp;immutable&nbsp;objects,&nbsp;then&nbsp;it&nbsp;is&nbsp;usually
&nbsp;*&nbsp;the&nbsp;case&nbsp;that&nbsp;no&nbsp;fields&nbsp;in&nbsp;the&nbsp;object&nbsp;returned&nbsp;by&nbsp;{@code&nbsp;super.clone}
&nbsp;*&nbsp;need&nbsp;to&nbsp;be&nbsp;modified.
&nbsp;*&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
&nbsp;*&nbsp;......
&nbsp;*/
protected&nbsp;native&nbsp;Object&nbsp;clone()&nbsp;throws&nbsp;CloneNotSupportedException;
</code></pre>
<p data-nodeid="28">ä»ä»¥ä¸Šæºç çš„æ³¨é‡Šä¿¡æ¯ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒObject å¯¹ clone() æ–¹æ³•çš„çº¦å®šæœ‰ä¸‰æ¡ï¼š</p>
<ul data-nodeid="29">
<li data-nodeid="30">
<p data-nodeid="31">å¯¹äºæ‰€æœ‰å¯¹è±¡æ¥è¯´ï¼Œx.clone() !=x åº”å½“è¿”å› trueï¼Œå› ä¸ºå…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼›</p>
</li>
<li data-nodeid="32">
<p data-nodeid="33">å¯¹äºæ‰€æœ‰å¯¹è±¡æ¥è¯´ï¼Œx.clone().getClass() == x.getClass() åº”å½“è¿”å› trueï¼Œå› ä¸ºå…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡çš„ç±»å‹æ˜¯ä¸€æ ·çš„ï¼›</p>
</li>
<li data-nodeid="34">
<p data-nodeid="35">å¯¹äºæ‰€æœ‰å¯¹è±¡æ¥è¯´ï¼Œx.clone().equals(x) åº”å½“è¿”å› trueï¼Œå› ä¸ºä½¿ç”¨ equals æ¯”è¾ƒæ—¶ï¼Œå®ƒä»¬çš„å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚</p>
</li>
</ul>
<p data-nodeid="36">é™¤äº†æ³¨é‡Šä¿¡æ¯å¤–ï¼Œæˆ‘ä»¬çœ‹ clone() çš„å®ç°æ–¹æ³•ï¼Œå‘ç° clone() æ˜¯ä½¿ç”¨ native ä¿®é¥°çš„æœ¬åœ°æ–¹æ³•ï¼Œå› æ­¤æ‰§è¡Œçš„æ€§èƒ½ä¼šå¾ˆé«˜ï¼Œå¹¶ä¸”å®ƒè¿”å›çš„ç±»å‹ä¸º Objectï¼Œå› æ­¤åœ¨è°ƒç”¨å…‹éš†ä¹‹åè¦æŠŠå¯¹è±¡å¼ºè½¬ä¸ºç›®æ ‡ç±»å‹æ‰è¡Œã€‚</p>
<h4 data-nodeid="37">Arrays.copyOf()</h4>
<p data-nodeid="38">å¦‚æœæ˜¯æ•°ç»„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ Arrays.copyOf() æ¥å®ç°å…‹éš†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="39"><code data-language="java">People[]&nbsp;o1&nbsp;=&nbsp;{<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>)};
People[]&nbsp;o2&nbsp;=&nbsp;Arrays.copyOf(o1,&nbsp;o1.length);
<span class="hljs-comment">//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼</span>
o1[<span class="hljs-number">0</span>].setName(<span class="hljs-string">"Jdk"</span>);
System.out.println(<span class="hljs-string">"o1:"</span>&nbsp;+&nbsp;o1[<span class="hljs-number">0</span>].getName());
System.out.println(<span class="hljs-string">"o2:"</span>&nbsp;+&nbsp;o2[<span class="hljs-number">0</span>].getName());
</code></pre>
<p data-nodeid="40">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre class="lang-java te-preview-highlight" data-nodeid="813"><code data-language="java">o1:Jdk
o2:Jdk
</code></pre>

<p data-nodeid="42">ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åœ¨ä¿®æ”¹å…‹éš†å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹åï¼ŒåŸå‹å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿè·Ÿç€è¢«ä¿®æ”¹äº†ï¼Œè¿™è¯´æ˜ Arrays.copyOf() å…¶å®æ˜¯ä¸€ä¸ªæµ…å…‹éš†ã€‚</p>
<p data-nodeid="43">å› ä¸ºæ•°ç»„æ¯”è¾ƒç‰¹æ®Šæ•°ç»„æœ¬èº«å°±æ˜¯å¼•ç”¨ç±»å‹ï¼Œå› æ­¤åœ¨ä½¿ç”¨ Arrays.copyOf() å…¶å®åªæ˜¯æŠŠå¼•ç”¨åœ°å€å¤åˆ¶äº†ä¸€ä»½ç»™å…‹éš†å¯¹è±¡ï¼Œå¦‚æœä¿®æ”¹äº†å®ƒçš„å¼•ç”¨å¯¹è±¡ï¼Œé‚£ä¹ˆæŒ‡å‘å®ƒçš„ï¼ˆå¼•ç”¨åœ°å€ï¼‰æ‰€æœ‰å¯¹è±¡éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤çœ‹åˆ°çš„ç»“æœæ˜¯ï¼Œä¿®æ”¹äº†å…‹éš†å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒåŸå‹å¯¹è±¡ä¹Ÿè·Ÿç€è¢«ä¿®æ”¹äº†ã€‚</p>
<h4 data-nodeid="44">æ·±å…‹éš†å®ç°æ–¹å¼æ±‡æ€»</h4>
<p data-nodeid="45">æ·±å…‹éš†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¤§ä½“å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p>
<ul data-nodeid="46">
<li data-nodeid="47">
<p data-nodeid="48">æ‰€æœ‰å¯¹è±¡éƒ½å®ç°å…‹éš†æ–¹æ³•ï¼›</p>
</li>
<li data-nodeid="49">
<p data-nodeid="50">é€šè¿‡æ„é€ æ–¹æ³•å®ç°æ·±å…‹éš†ï¼›</p>
</li>
<li data-nodeid="51">
<p data-nodeid="52">ä½¿ç”¨ JDK è‡ªå¸¦çš„å­—èŠ‚æµå®ç°æ·±å…‹éš†ï¼›</p>
</li>
<li data-nodeid="53">
<p data-nodeid="54">ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å®ç°æ·±å…‹éš†ï¼Œæ¯”å¦‚ Apache Commons Langï¼›</p>
</li>
<li data-nodeid="55">
<p data-nodeid="56">ä½¿ç”¨ JSON å·¥å…·ç±»å®ç°æ·±å…‹éš†ï¼Œæ¯”å¦‚ Gsonã€FastJSON ç­‰ã€‚</p>
</li>
</ul>
<p data-nodeid="57">æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«æ¥å®ç°ä»¥ä¸Šè¿™äº›æ–¹å¼ï¼Œåœ¨å¼€å§‹ä¹‹å‰å…ˆå®šä¹‰ä¸€ä¸ªå…¬å…±çš„ç”¨æˆ·ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="58"><code data-language="java"><span class="hljs-comment">/**
&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;*/</span>
<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;&nbsp;<span class="hljs-comment">//&nbsp;åŒ…å«&nbsp;Address&nbsp;å¼•ç”¨å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
}
<span class="hljs-comment">/**
&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;*/</span>
<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">Address</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
}
</code></pre>
<p data-nodeid="59">å¯ä»¥çœ‹å‡ºåœ¨ People å¯¹è±¡ä¸­åŒ…å«äº†ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ Addressã€‚</p>
<p data-nodeid="60"><strong data-nodeid="160">1.æ‰€æœ‰å¯¹è±¡éƒ½å®ç°å…‹éš†</strong></p>
<p data-nodeid="61">è¿™ç§æ–¹å¼æˆ‘ä»¬éœ€è¦ä¿®æ”¹ People å’Œ Address ç±»ï¼Œè®©å®ƒä»¬éƒ½å®ç° Cloneable çš„æ¥å£ï¼Œè®©æ‰€æœ‰çš„å¼•ç”¨å¯¹è±¡éƒ½å®ç°å…‹éš†ï¼Œä»è€Œå®ç° People ç±»çš„æ·±å…‹éš†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="62"><code data-language="java"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">CloneExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºè¢«èµ‹å€¼å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(<span class="hljs-number">110</span>,&nbsp;<span class="hljs-string">"åŒ—äº¬"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>,&nbsp;address);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å…‹éš†&nbsp;p1&nbsp;å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;p1.clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.getAddress().setCity(<span class="hljs-string">"è¥¿å®‰"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è¾“å‡º&nbsp;p1&nbsp;å’Œ&nbsp;p2&nbsp;åœ°å€ä¿¡æ¯</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="hljs-string">"p1:"</span>&nbsp;+&nbsp;p1.getAddress().getCity()&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"&nbsp;p2:"</span>&nbsp;+&nbsp;p2.getAddress().getCity());
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Cloneable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;é‡å†™&nbsp;clone&nbsp;æ–¹æ³•
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws</span>&nbsp;CloneNotSupportedException
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta">@Override</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">protected</span>&nbsp;People&nbsp;<span class="hljs-title">clone</span><span class="hljs-params">()</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;people&nbsp;=&nbsp;(People)&nbsp;<span class="hljs-keyword">super</span>.clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;people.setAddress(<span class="hljs-keyword">this</span>.address.clone());&nbsp;<span class="hljs-comment">//&nbsp;å¼•ç”¨ç±»å‹å…‹éš†èµ‹å€¼</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;people;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">Address</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Cloneable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;é‡å†™&nbsp;clone&nbsp;æ–¹æ³•
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws</span>&nbsp;CloneNotSupportedException
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-meta">@Override</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">protected</span>&nbsp;Address&nbsp;<span class="hljs-title">clone</span><span class="hljs-params">()</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(Address)&nbsp;<span class="hljs-keyword">super</span>.clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="63">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre class="lang-java" data-nodeid="64"><code data-language="java">p1:è¥¿å®‰&nbsp;p2:åŒ—äº¬
</code></pre>
<p data-nodeid="65">ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†åŸå‹å¯¹è±¡çš„å¼•ç”¨å±æ€§ä¹‹åï¼Œå¹¶æ²¡æœ‰å½±å“å…‹éš†å¯¹è±¡ï¼Œè¿™è¯´æ˜æ­¤å¯¹è±¡å·²ç»å®ç°äº†æ·±å…‹éš†ã€‚</p>
<p data-nodeid="66"><strong data-nodeid="167">2.é€šè¿‡æ„é€ æ–¹æ³•å®ç°æ·±å…‹éš†</strong></p>
<p data-nodeid="67">ã€ŠEffective Javaã€‹ ä¸­æ¨èä½¿ç”¨æ„é€ å™¨ï¼ˆCopy Constructorï¼‰æ¥å®ç°æ·±å…‹éš†ï¼Œå¦‚æœæ„é€ å™¨çš„å‚æ•°ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æˆ–å­—ç¬¦ä¸²ç±»å‹åˆ™ç›´æ¥èµ‹å€¼ï¼Œå¦‚æœæ˜¯å¯¹è±¡ç±»å‹ï¼Œåˆ™éœ€è¦é‡æ–° new ä¸€ä¸ªå¯¹è±¡ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="68"><code data-language="java"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">SecondExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºå¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(<span class="hljs-number">110</span>,&nbsp;<span class="hljs-string">"åŒ—äº¬"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>,&nbsp;address);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è°ƒç”¨æ„é€ å‡½æ•°å…‹éš†å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(p1.getId(),&nbsp;p1.getName(),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(p1.getAddress().getId(),&nbsp;p1.getAddress().getCity()));

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.getAddress().setCity(<span class="hljs-string">"è¥¿å®‰"</span>);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è¾“å‡º&nbsp;p1&nbsp;å’Œ&nbsp;p2&nbsp;åœ°å€ä¿¡æ¯</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="hljs-string">"p1:"</span>&nbsp;+&nbsp;p1.getAddress().getCity()&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"&nbsp;p2:"</span>&nbsp;+&nbsp;p2.getAddress().getCity());
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">Address</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="69">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre data-nodeid="70"><code>p1:è¥¿å®‰&nbsp;p2:åŒ—äº¬
</code></pre>
<p data-nodeid="71">ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†åŸå‹å¯¹è±¡çš„å¼•ç”¨å±æ€§ä¹‹åï¼Œå¹¶æ²¡æœ‰å½±å“å…‹éš†å¯¹è±¡ï¼Œè¿™è¯´æ˜æ­¤å¯¹è±¡å·²ç»å®ç°äº†æ·±å…‹éš†ã€‚</p>
<p data-nodeid="72"><strong data-nodeid="174">3.é€šè¿‡å­—èŠ‚æµå®ç°æ·±å…‹éš†</strong></p>
<p data-nodeid="73">é€šè¿‡ JDK è‡ªå¸¦çš„å­—èŠ‚æµå®ç°æ·±å…‹éš†çš„æ–¹å¼ï¼Œæ˜¯å…ˆå°†è¦åŸå‹å¯¹è±¡å†™å…¥åˆ°å†…å­˜ä¸­çš„å­—èŠ‚æµï¼Œç„¶åå†ä»è¿™ä¸ªå­—èŠ‚æµä¸­è¯»å‡ºåˆšåˆšå­˜å‚¨çš„ä¿¡æ¯ï¼Œæ¥ä½œä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å›ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å¯¹è±¡å’ŒåŸå‹å¯¹è±¡å°±ä¸å­˜åœ¨ä»»ä½•åœ°å€ä¸Šçš„å…±äº«ï¼Œè¿™æ ·å°±å®ç°äº†æ·±å…‹éš†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="74"><code data-language="java"><span class="hljs-keyword">import</span>&nbsp;java.io.*;

<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">ThirdExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºå¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(<span class="hljs-number">110</span>,&nbsp;<span class="hljs-string">"åŒ—äº¬"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>,&nbsp;address);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;é€šè¿‡å­—èŠ‚æµå®ç°å…‹éš†</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;(People)&nbsp;StreamClone.clone(p1);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.getAddress().setCity(<span class="hljs-string">"è¥¿å®‰"</span>);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è¾“å‡º&nbsp;p1&nbsp;å’Œ&nbsp;p2&nbsp;åœ°å€ä¿¡æ¯</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="hljs-string">"p1:"</span>&nbsp;+&nbsp;p1.getAddress().getCity()&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"&nbsp;p2:"</span>&nbsp;+&nbsp;p2.getAddress().getCity());
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;é€šè¿‡å­—èŠ‚æµå®ç°å…‹éš†
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">StreamClone</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;&lt;T&nbsp;extends&nbsp;Serializable&gt;&nbsp;<span class="hljs-function">T&nbsp;<span class="hljs-title">clone</span><span class="hljs-params">(People&nbsp;obj)</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T&nbsp;cloneObj&nbsp;=&nbsp;<span class="hljs-keyword">null</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">try</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å†™å…¥å­—èŠ‚æµ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayOutputStream&nbsp;bo&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;ByteArrayOutputStream();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectOutputStream&nbsp;oos&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;ObjectOutputStream(bo);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oos.writeObject(obj);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oos.close();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ†é…å†…å­˜,å†™å…¥åŸå§‹å¯¹è±¡,ç”Ÿæˆæ–°å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteArrayInputStream&nbsp;bi&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;ByteArrayInputStream(bo.toByteArray());<span class="hljs-comment">//è·å–ä¸Šé¢çš„è¾“å‡ºå­—èŠ‚æµ</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectInputStream&nbsp;oi&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;ObjectInputStream(bi);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è¿”å›ç”Ÿæˆçš„æ–°å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cloneObj&nbsp;=&nbsp;(T)&nbsp;oi.readObject();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oi.close();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">catch</span>&nbsp;(Exception&nbsp;e)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;cloneObj;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Serializable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">Address</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Serializable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="75">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre data-nodeid="76"><code>p1:è¥¿å®‰&nbsp;p2:åŒ—äº¬
</code></pre>
<p data-nodeid="77">æ­¤æ–¹å¼éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ˜¯é€šè¿‡å­—èŠ‚æµåºåˆ—åŒ–å®ç°çš„æ·±å…‹éš†ï¼Œå› æ­¤æ¯ä¸ªå¯¹è±¡å¿…é¡»èƒ½è¢«åºåˆ—åŒ–ï¼Œå¿…é¡»å®ç° Serializable æ¥å£ï¼Œæ ‡è¯†è‡ªå·±å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ (java.io.NotSerializableException)ã€‚</p>
<p data-nodeid="78"><strong data-nodeid="181">4.é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·å®ç°æ·±å…‹éš†</strong></p>
<p data-nodeid="79">æœ¬è¯¾æ—¶ä½¿ç”¨ Apache Commons Lang æ¥å®ç°æ·±å…‹éš†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="80"><code data-language="java"><span class="hljs-keyword">import</span>&nbsp;org.apache.commons.lang3.SerializationUtils;

<span class="hljs-keyword">import</span>&nbsp;java.io.Serializable;

<span class="hljs-comment">/**
&nbsp;*&nbsp;æ·±å…‹éš†å®ç°æ–¹å¼å››ï¼šé€šè¿‡&nbsp;apache.commons.lang&nbsp;å®ç°
&nbsp;*/</span>
<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">FourthExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºå¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(<span class="hljs-number">110</span>,&nbsp;<span class="hljs-string">"åŒ—äº¬"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>,&nbsp;address);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è°ƒç”¨&nbsp;apache.commons.lang&nbsp;å…‹éš†å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;(People)&nbsp;SerializationUtils.clone(p1);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.getAddress().setCity(<span class="hljs-string">"è¥¿å®‰"</span>);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è¾“å‡º&nbsp;p1&nbsp;å’Œ&nbsp;p2&nbsp;åœ°å€ä¿¡æ¯</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="hljs-string">"p1:"</span>&nbsp;+&nbsp;p1.getAddress().getCity()&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"&nbsp;p2:"</span>&nbsp;+&nbsp;p2.getAddress().getCity());
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">People</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Serializable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">Address</span>&nbsp;<span class="hljs-keyword">implements</span>&nbsp;<span class="hljs-title">Serializable</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•</span>
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="81">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre data-nodeid="82"><code>p1:è¥¿å®‰&nbsp;p2:åŒ—äº¬
</code></pre>
<p data-nodeid="83">å¯ä»¥çœ‹å‡ºæ­¤æ–¹æ³•å’Œç¬¬ä¸‰ç§å®ç°æ–¹å¼ç±»ä¼¼ï¼Œéƒ½éœ€è¦å®ç° Serializable æ¥å£ï¼Œéƒ½æ˜¯é€šè¿‡å­—èŠ‚æµçš„æ–¹å¼å®ç°çš„ï¼Œåªä¸è¿‡è¿™ç§å®ç°æ–¹å¼æ˜¯ç¬¬ä¸‰æ–¹æä¾›äº†ç°æˆçš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p>
<p data-nodeid="84"><strong data-nodeid="188">5.é€šè¿‡ JSON å·¥å…·ç±»å®ç°æ·±å…‹éš†</strong></p>
<p data-nodeid="85">æœ¬è¯¾æ—¶æˆ‘ä»¬ä½¿ç”¨ Google æä¾›çš„ JSON è½¬åŒ–å·¥å…· Gson æ¥å®ç°ï¼Œå…¶ä»– JSON è½¬åŒ–å·¥å…·ç±»ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="86"><code data-language="java"><span class="hljs-keyword">import</span>&nbsp;com.google.gson.Gson;

<span class="hljs-comment">/**
&nbsp;*&nbsp;æ·±å…‹éš†å®ç°æ–¹å¼äº”ï¼šé€šè¿‡&nbsp;JSON&nbsp;å·¥å…·å®ç°
&nbsp;*/</span>
<span class="hljs-keyword">public</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">FifthExample</span>&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;<span class="hljs-keyword">void</span>&nbsp;<span class="hljs-title">main</span><span class="hljs-params">(String[]&nbsp;args)</span>&nbsp;<span class="hljs-keyword">throws</span>&nbsp;CloneNotSupportedException&nbsp;</span>{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;åˆ›å»ºå¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Address(<span class="hljs-number">110</span>,&nbsp;<span class="hljs-string">"åŒ—äº¬"</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p1&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;People(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-string">"Java"</span>,&nbsp;address);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;è°ƒç”¨&nbsp;Gson&nbsp;å…‹éš†å¯¹è±¡</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gson&nbsp;gson&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;Gson();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;People&nbsp;p2&nbsp;=&nbsp;gson.fromJson(gson.toJson(p1),&nbsp;People.class);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ä¿®æ”¹åŸå‹å¯¹è±¡
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1.getAddress().setCity("è¥¿å®‰");

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;è¾“å‡º&nbsp;p1&nbsp;å’Œ&nbsp;p2&nbsp;åœ°å€ä¿¡æ¯
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("p1:"&nbsp;+&nbsp;p1.getAddress().getCity()&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;p2:"&nbsp;+&nbsp;p2.getAddress().getCity());
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ç”¨æˆ·ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;class&nbsp;People&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;name;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Address&nbsp;address;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;/**
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;åœ°å€ç±»
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;class&nbsp;Address&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;Integer&nbsp;id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">private</span>&nbsp;String&nbsp;city;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;å¿½ç•¥æ„é€ æ–¹æ³•ã€setã€get&nbsp;æ–¹æ³•
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</code></pre>
<p data-nodeid="87">ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<pre data-nodeid="88"><code>p1:è¥¿å®‰&nbsp;p2:åŒ—äº¬
</code></pre>
<p data-nodeid="89">ä½¿ç”¨ JSON å·¥å…·ç±»ä¼šå…ˆæŠŠå¯¹è±¡è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œå†ä»å­—ç¬¦ä¸²è½¬åŒ–æˆæ–°çš„å¯¹è±¡ï¼Œå› ä¸ºæ–°å¯¹è±¡æ˜¯ä»å­—ç¬¦ä¸²è½¬åŒ–è€Œæ¥çš„ï¼Œå› æ­¤ä¸ä¼šå’ŒåŸå‹å¯¹è±¡æœ‰ä»»ä½•çš„å…³è”ï¼Œè¿™æ ·å°±å®ç°äº†æ·±å…‹éš†ï¼Œå…¶ä»–ç±»ä¼¼çš„ JSON å·¥å…·ç±»å®ç°æ–¹å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
<h4 data-nodeid="90">å…‹éš†è®¾è®¡ç†å¿µçŒœæƒ³</h4>
<p data-nodeid="91">å¯¹äºå…‹éš†ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Œå®˜æ–¹æ²¡æœ‰ç›´æ¥ç»™å‡ºç­”æ¡ˆï¼Œæˆ‘ä»¬åªèƒ½å‡­å€Ÿä¸€äº›ç»éªŒå’Œæºç æ–‡æ¡£æ¥è¯•ç€å›ç­”ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚Java ä¸­å®ç°å…‹éš†éœ€è¦ä¸¤ä¸ªä¸»è¦çš„æ­¥éª¤ï¼Œä¸€æ˜¯ å®ç° Cloneable ç©ºæ¥å£ï¼ŒäºŒæ˜¯é‡å†™ Object çš„ clone() æ–¹æ³•å†è°ƒç”¨çˆ¶ç±»çš„å…‹éš†æ–¹æ³• (super.clone())ï¼Œé‚£ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</p>
<p data-nodeid="92">ä»æºç ä¸­å¯ä»¥çœ‹å‡º Cloneable æ¥å£è¯ç”Ÿçš„æ¯”è¾ƒæ—©ï¼ŒJDK 1.0 å°±å·²ç»å­˜åœ¨äº†ï¼Œå› æ­¤ä»é‚£ä¸ªæ—¶å€™å°±å·²ç»æœ‰å…‹éš†æ–¹æ³•äº†ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæ¥æ ‡è¯†ä¸€ä¸ªç±»çº§åˆ«å¯¹è±¡æ‹¥æœ‰å…‹éš†æ–¹æ³•å‘¢ï¼Ÿå…‹éš†è™½ç„¶é‡è¦ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç»™æ¯ä¸ªç±»éƒ½é»˜è®¤åŠ ä¸Šå…‹éš†ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œé‚£æˆ‘ä»¬èƒ½ä½¿ç”¨çš„æ‰‹æ®µå°±åªæœ‰è¿™å‡ ä¸ªäº†ï¼š</p>
<ul data-nodeid="93">
<li data-nodeid="94">
<p data-nodeid="95">åœ¨ç±»ä¸Šæ–°å¢æ ‡è¯†ï¼Œæ­¤æ ‡è¯†ç”¨äºå£°æ˜æŸä¸ªç±»æ‹¥æœ‰å…‹éš†çš„åŠŸèƒ½ï¼Œåƒ final å…³é”®å­—ä¸€æ ·ï¼›</p>
</li>
<li data-nodeid="96">
<p data-nodeid="97">ä½¿ç”¨ Java ä¸­çš„æ³¨è§£ï¼›</p>
</li>
<li data-nodeid="98">
<p data-nodeid="99">å®ç°æŸä¸ªæ¥å£ï¼›</p>
</li>
<li data-nodeid="100">
<p data-nodeid="101">ç»§æ‰¿æŸä¸ªç±»ã€‚</p>
</li>
</ul>
<p data-nodeid="102">å…ˆè¯´ç¬¬ä¸€ä¸ªï¼Œä¸ºäº†ä¸€ä¸ªé‡è¦ä½†ä¸å¸¸ç”¨çš„å…‹éš†åŠŸèƒ½ï¼Œ å•ç‹¬æ–°å¢ä¸€ä¸ªç±»æ ‡è¯†ï¼Œè¿™æ˜¾ç„¶ä¸åˆé€‚ï¼›å†è¯´ç¬¬äºŒä¸ªï¼Œå› ä¸ºå…‹éš†åŠŸèƒ½å‡ºç°çš„æ¯”è¾ƒæ—©ï¼Œé‚£æ—¶å€™è¿˜æ²¡æœ‰æ³¨è§£åŠŸèƒ½ï¼Œå› æ­¤ä¹Ÿä¸èƒ½ä½¿ç”¨ï¼›ç¬¬ä¸‰ç‚¹åŸºæœ¬æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œç¬¬å››ç‚¹å’Œç¬¬ä¸€ç‚¹æ¯”è¾ƒç±»ä¼¼ï¼Œä¸ºäº†ä¸€ä¸ªå…‹éš†åŠŸèƒ½éœ€è¦ç‰ºç‰²ä¸€ä¸ªåŸºç±»ï¼Œå¹¶ä¸” Java åªèƒ½å•ç»§æ‰¿ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ¡ˆä¹Ÿä¸åˆé€‚ã€‚é‡‡ç”¨æ’é™¤æ³•ï¼Œæ— ç–‘ä½¿ç”¨å®ç°æ¥å£çš„æ–¹å¼æ˜¯é‚£æ—¶æœ€åˆç†çš„æ–¹æ¡ˆäº†ï¼Œè€Œä¸”åœ¨ Java è¯­è¨€ä¸­ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p>
<p data-nodeid="103">é‚£ä¸ºä»€ä¹ˆè¦åœ¨ Object ä¸­æ·»åŠ ä¸€ä¸ª clone() æ–¹æ³•å‘¢ï¼Ÿ</p>
<p data-nodeid="104">å› ä¸º clone() æ–¹æ³•è¯­ä¹‰çš„ç‰¹æ®Šæ€§ï¼Œå› æ­¤æœ€å¥½èƒ½æœ‰ JVM çš„ç›´æ¥æ”¯æŒï¼Œæ—¢ç„¶è¦ JVM ç›´æ¥æ”¯æŒï¼Œå°±è¦æ‰¾ä¸€ä¸ª API æ¥æŠŠè¿™ä¸ªæ–¹æ³•æš´éœ²å‡ºæ¥æ‰è¡Œï¼Œæœ€ç›´æ¥çš„åšæ³•å°±æ˜¯æŠŠå®ƒæ”¾å…¥åˆ°ä¸€ä¸ªæ‰€æœ‰ç±»çš„åŸºç±» Object ä¸­ï¼Œè¿™æ ·æ‰€æœ‰ç±»å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨åˆ°äº†ã€‚</p>
<h3 data-nodeid="105">å°ç»“</h3>
<p data-nodeid="106">æœ¬è¯¾æ—¶æˆ‘ä»¬è®²äº†æµ…å…‹éš†å’Œæ·±å…‹éš†çš„æ¦‚å¿µï¼Œä»¥åŠ Object å¯¹ clone() æ–¹æ³•çš„çº¦å®šï¼›è¿˜æ¼”ç¤ºäº†æ•°ç»„çš„ copyOf() æ–¹æ³•å…¶å®ä¸ºæµ…å…‹éš†ï¼Œä»¥åŠæ·±å…‹éš†çš„ 5 ç§å®ç°æ–¹å¼ï¼›æœ€åæˆ‘ä»¬è®²äº† Java è¯­è¨€ä¸­å…‹éš†çš„è®¾è®¡æ€è·¯çŒœæƒ³ï¼Œå¸Œæœ›è¿™äº›å†…å®¹èƒ½åˆ‡å®çš„å¸®åŠ©åˆ°ä½ ã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### **5260ï¼š
> java8ä¸­çš„Arrays.copyOfå·²ç»æ˜¯æ·±æ‹·è´äº†

##### **8335ï¼š
> çœ‹åˆ°æ¥¼ä¸Šæœ‰åŒå­¦è¯´jdk8æ˜¯æ·±æ‹·è´ æœ‰ç‚¹æ€€ç–‘ ç„¶åè‡ªå·±ç”µè„‘ä¸Šç”¨jdk1.7 å’Œjdk1.8æµ‹è¯•äº†ä¸€ä¸‹ Arrays.copyOf()éƒ½æ˜¯æµ…æ‹·è´å•Š&nbsp; ç½‘ä¸Šçš„èµ„æ–™ä¹Ÿæ˜¯æµ…æ‹·è´ ä¸çŸ¥é“æ˜¯ä¸æ˜¯å¼„é”™äº†ğŸ˜‚

 ###### &nbsp;&nbsp;&nbsp; ç¼–è¾‘å›å¤ï¼š
> &nbsp;&nbsp;&nbsp; Arrays.copyOf() æ˜¯æµ…å…‹éš†

##### **æ˜†ï¼š
> Arrays.copyOf1.8ä¸­æµ‹è¯•ç»“è®ºè¿˜æ˜¯æµ…æ‹·è´

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; Arrays.copyOf() æ˜¯æµ…å…‹éš†

##### **å‡ï¼š
> Arrays.copyOf å¯¹äºæ•°å€¼ç±»å‹çš„æ˜¯æ·±æ‹·è´ï¼Œåªèƒ½æ‹·è´å€¼ï¼Œå¯¹äºå¯¹è±¡ç±»å‹çš„ï¼Œæ˜¯æµ…æ‹·è´

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ç»“è®ºæ˜¯å¯¹çš„ï¼Œä½†æˆ‘ä»¬é€šå¸¸æŠŠè¿™ç§æƒ…å†µç†è§£å’Œå½’çº³ä¸ºæµ…æ‹·è´å“ˆï¼Œå°±åƒ true && false çš„ç»“æœæ˜¯ falseï¼Œåªæœ‰ true && true æ‰æ˜¯ true ä¸€æ ·ã€‚

##### **çŸ¥é“ï¼š
> x.clone().equals(x) è¿™ä¸ªæ˜¯ false çš„å•Šï¼Œequalsçš„é»˜è®¤å®ç°æ˜¯==ï¼Œæ¯”è¾ƒå†…å®¹åŠæ¯”è¾ƒåœ°å€çš„ã€‚å¤§ä¼™å¯ä»¥è¯•è¯•çœ‹

##### **6602ï¼š
> <div><span style="font-size: 16.0125px;">People&nbsp;p1 =&nbsp;</span><span style="font-size: 0.427rem;">new&nbsp;</span><span style="font-size: 0.427rem;">People (1,2,3);</span></div><div><span style="font-size: 16.0125px;">People p2;</span></div><div><span style="font-size: 16.0125px;">p2 = p1;</span></div><div><span style="font-size: 16.0125px;">è¿™æ ·ç®—å…‹éš†å—</span></div><div><span style="font-size: 16.0125px;"><br></span></div><div><br></div>

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; è¿™åº”è¯¥å«èµ‹å€¼å§

##### 20201230ï¼š
> cloneable closeable serializable è¿™ç±»ç›¸å½“äº æ ‡è®°æ¥å£

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; å¯¹çš„ï¼Œç›¸å½“äºå‘Šè¯‰ JVM æˆ‘è¦å¹²XXXäº†ã€‚

##### **æ³½ï¼š
> Arrays.copyOf çš„ æ‰§è¡Œç»“æœå†™é”™äº†å§

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; å—¯ï¼Œæ²¡æœ‰å•Šï¼ŒArrays.copyOf() æµ…å…‹éš†ä¿®æ”¹ä¸€ä¸ªå¦ä¸€ä¸ªä¹Ÿå˜äº†ã€‚

